// Copyright Â© SixtyFPS GmbH <info@slint-ui.com>
// SPDX-License-Identifier: GPL-3.0-only OR LicenseRef-Slint-commercial

import { StyleMetrics } from "std-widgets.slint";

SideBarItem := Rectangle {
    callback clicked <=> touch.clicked;
    property<string> text <=> label.text;
    property<bool> selected: false;

    min-height: 36px;

    state := Rectangle {  
        opacity: 0;
        background: StyleMetrics.window-background;

        animate opacity { duration: 150ms; }
    }
    
    HorizontalLayout {  
        y: (parent.height - height) / 2;
        padding: StyleMetrics.layout-padding;
        spacing: 0px;

        label := Text {
            color: StyleMetrics.default-text-color;
            vertical-alignment: center;
         }
    }

    touch := TouchArea {
        width: 100%;
        height: 100%;
    }

    states [  
        pressed when touch.pressed : {
            state.opacity: 0.8;
        }
        hover when touch.has-hover : {
            state.opacity: 0.6;
        }
        selected when root.selected : {
            state.opacity: 1;
        }
    ]
}

export SideBar := Rectangle {
    property<[string]> model: [];
    property<int> current-item: 0;
    property<string> title <=> label.text;
    width: 260px;

    Rectangle {  
        background: StyleMetrics.window-background.darker(0.2);
    }
   
    VerticalLayout {      
        padding-top: StyleMetrics.layout-padding;
        padding-bottom: StyleMetrics.layout-padding;
        spacing: StyleMetrics.layout-spacing;
        alignment: start;

        label := Text {
            font-size: 20px;
            horizontal-alignment: center;
        }

        navigation := VerticalLayout { 
            alignment: start;
            vertical-stretch: 0; 
            for item[index] in model : SideBarItem {
                text: item;
                selected: index == current-item;
                clicked => { current-item = index; }
            }
        }

        VerticalLayout {  
            bottom := VerticalLayout {  
                padding-left: StyleMetrics.layout-padding;
                padding-right: StyleMetrics.layout-padding;

                @children
             }
        }    
    }
}