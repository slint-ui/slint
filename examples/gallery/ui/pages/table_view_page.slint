// Copyright Â© SixtyFPS GmbH <info@slint-ui.com>
// SPDX-License-Identifier: GPL-3.0-only OR LicenseRef-Slint-commercial

import { HorizontalBox, VerticalBox, StandardTableView, GroupBox} from "std-widgets.slint";
import { GallerySettings } from "../gallery_settings.slint";
import { Page } from "page.slint";

export global TableViewPageAdapter := {
    callback sort_ascending(int);
    callback sort_descending(int);
    property <[StandardTableRow]> row_data;
}

export TableViewPage := Page {
    title: "TableView";
    description: "StandardListBox can be used to display a list of text elements in columns and rows. It can be imported from \"std-widgets.slint\"";

    HorizontalBox {   
        vertical-stretch: 1;

        GroupBox {  
            title: "StandardTableView";
            vertical-stretch: 0;

            StandardTableView {
                private property <int> current-sort-column: -1;

                column-clicked(index) => {
                    if (current-sort-column != index) {
                        columns[current-sort-column].sort-by-ascending = false;
                        columns[current-sort-column].sort-by-descending = false;
                    }

                    if(columns[index].sort-by-ascending) {
                        columns[index].sort-by-ascending = false;
                        columns[index].sort-by-descending = true;
                        TableViewPageAdapter.sort_descending(index);
                    } else {
                        columns[index].sort-by-ascending = true;
                        columns[index].sort-by-descending = false;
                        TableViewPageAdapter.sort_ascending(index);
                    }

                    current-sort-column = index;
                }
                property <StandardTableRow> first-row: {
                    items: [
                       { text: "Item 1", editable: true },
                       { text: "Item 2" },
                       { text: "Item 3" },
                       { text: "Item 4" },
                    ]
                };
            
                property <StandardTableRow> second-row: {
                    items: [
                        { text: "Item 1", editable: true },
                       { text: "Item 2" },
                       { text: "Item 3" },
                       { text: "Item 4" },
                    ]
                };
            
                property <StandardTableRow> third-row: {
                    items: [
                        { text: "Item 1", editable: true },
                       { text: "Item 2" },
                       { text: "Item 3" },
                       { text: "Item 4" },
                    ]
                };

                columns: [
                    { title: "Header 1" },
                    { title: "Header 2" },
                    { title: "Header 3" },
                    { title: "Header 4" },
                ];
                rows: TableViewPageAdapter.row_data;
            }
        }
    }
}
