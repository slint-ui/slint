import { Theme } from "theme.slint";
import { TitleLabel } from "title_label.slint";

export Card := Rectangle {
    callback clicked <=> touch-area.clicked;  

    property <string> title: "title";
    property <bool> is-selected: false;
    property <image> image-source <=> image.source;
    property <length> spacing: Theme.spacing-medium;
    property <length> title-spacing: Theme.spacing-medium;
    property <length> title-area-height: Theme.size-small;
    property <duration> duration: Theme.duration-regular;

    background: transparent;
    width: Theme.size-medium;
    height: Theme.size-medium;

    // background
    background := Rectangle { 
        opacity: 0.95;
        clip: true;
        border-radius: Theme.radius-big;
        background: Theme.background-regular;
    
        touch-area := TouchArea {}
  
        image := Image {
            x: (parent.width - width) / 2;
            y: (parent.height - height) / 2;
            width: 80%;
            height: 80%;
            colorize: Theme.foreground;
        }
    }

    // Selection text
    titleArea := TitleLabel {
        x: root.spacing + parent.width;
        y: parent.height - self.height;
        text <=> title;
        visible: false;
    }

    states [
        selected-pressed when touch-area.pressed : {
            background.background: Theme.background-pressed;
            image.colorize: Theme.foreground-hover;
            width: Theme.size-big;
            height: Theme.size-big;
            background.border-color: Theme.border-color-selected;
            titleArea.visible: true;
        }
        pressed when touch-area.pressed : {
            background.background: Theme.background-pressed;
            image.colorize: Theme.foreground-hover;
        }
        selected-hover when touch-area.has-hover && is-selected : {
            background.background: Theme.background-hover;
            image.colorize: Theme.foreground-hover;
            width: Theme.size-big;
            height: Theme.size-big;
            background.border-color: Theme.border-color-selected;
            titleArea.visible: true;
        }
        hover when touch-area.has-hover : {
            background.background: Theme.background-hover;
            image.colorize: Theme.foreground-hover;
        }
        selected when is-selected : {
            width: Theme.size-big;
            height: Theme.size-big;
            background.border-color: Theme.border-color-selected;
            titleArea.visible: true;
        }
     ]

     animate width { duration: duration; easing: ease-in; }
     animate height { duration: duration; easing: ease-in; }
}