// Copyright Â© SixtyFPS GmbH <info@slint.dev>
// SPDX-License-Identifier: MIT

import { DemoPalette } from "../common.slint";

component SquareButton inherits Rectangle {
    in property <image> img;

    callback clicked;

    border-radius: 3px;
    border-width: 2px;
    border-color: DemoPalette.control-outline-color;

    touch := TouchArea {
        pointer-event(ev) => {
            if (ev.kind == PointerEventKind.down) {
                root.clicked()
            }
        }

        width: 120%;
        height: 120%;
    }

    Image {
        height: 12px;
        width: 12px;
        x: (parent.width - self.width) / 2;
        y: (parent.height - self.height) / 2;
        source <=> root.img;
        image-fit: contain;
        colorize: DemoPalette.control-secondary;
    }
}

export component SpinBox inherits Rectangle {
    in property <int> minimum;
    in property <int> maximum: 100;
    in-out property <int> value;

    height: 32px;

    HorizontalLayout {
        spacing: 12px;
        padding: 0;

        SquareButton {
            clicked => {
                if (root.value > root.minimum) {
                    root.value -= 1;
                }
            }

            width: root.height - parent.padding * 2;
            img: @image-url("../images/minus.svg");
        }

        Rectangle {
            border-radius: 3px;
            border-width: 2px;
            border-color: DemoPalette.control-outline-color;

            Text {
                width: 100%;
                height: 100%;
                vertical-alignment: center;
                horizontal-alignment: center;
                text: root.value;
                color: DemoPalette.control-foreground;
            }
        }

        SquareButton {
            clicked => {
                if (root.value < root.maximum) {
                    root.value += 1;
                }
            }

            width: root.height - parent.padding * 2;
            img: @image-url("../images/plus.svg");
        }
    }
}
