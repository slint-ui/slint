// Copyright Â© SixtyFPS GmbH <info@slint.dev>
// SPDX-License-Identifier: MIT

import { DemoPalette, Page, PushButton } from "./common.slint";
import { CopyPage } from "./copy_page.slint";
import { ScanPage } from "./scan_page.slint";
import { NarrowPrinterQueueList } from "./printer_queue.slint";

component ActionButton inherits Image {
    in property <string> text <=> label.text;

    callback clicked;
    width: 104px;

    label := Text {
        y: 50px;
        font-size: DemoPalette.base-font-size * 1.2;
        horizontal-alignment: center;
        color: white;
    }

    ta := TouchArea {
        pointer-event(event) => {
            if (event.button == PointerEventButton.left && event.kind == PointerEventKind.down) {
                root.clicked();
            }
        }
    }
}

export component HomePage inherits Page {
    in-out property <length> header-row-height: 40px / 2;
    in-out property <length> button-spacing: 8px;
    in-out property <length> button-width: 127px / 2;
    in-out property <length> button-height: root.button-width + 20px;
    in-out property <int> current-subpage: 0;

    header: "Printer";

    HorizontalLayout {
        spacing: 8px;
        VerticalLayout {
            padding-top: 8px;
            width: self.preferred-width;
            for action[idx] in [
                { name: "Copy", icon: @image-url("images/mcu/copy-button.jpg") },
                { name: "Scan", icon: @image-url("images/mcu/scan-button.jpg") },
            ]: ActionButton {
                clicked => { root.current-subpage = idx + 1; }
                source: action.icon;
                text: action.name;
            }
        }
        queue-view :=  NarrowPrinterQueueList {
        }
    }


    ScanPage {
        back => { root.current-subpage = 0 }
        x: root.current-subpage == 2 ? 0 : 320px;
        y: -root.header-height;
        animate x { duration: 125ms; easing: ease; }
    }

    CopyPage {
        back => { root.current-subpage = 0 }
        x: root.current-subpage == 1 ? 0 : 320px;
        y: -root.header-height;
        animate x { duration: 125ms; easing: ease; }
    }
}
