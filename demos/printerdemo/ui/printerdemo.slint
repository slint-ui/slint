// Copyright Â© SixtyFPS GmbH <info@slint.dev>
// SPDX-License-Identifier: MIT

import { DemoPalette, PrinterState, InkLevel, Page } from "common.slint";
import {
    HomePage,
    InkPage,
    SettingsPage,
    PrinterSettings,
} from "./pages/pages.slint";
import { PrinterQueue } from "./pages/printer_queue.slint";
import { Sidebar } from "components/sidebar.slint";
import { KioskController } from "./kiosk.slint";

// re-export for the native code
export { PrinterQueue, PrinterSettings, PrinterState, InkLevel }

import "./fonts/Inter-24pt-Regular.ttf";
import "./fonts/Inter-24pt-Medium.ttf";

export component MainWindow inherits Window {
    callback quit();

    min-width: 772px;
    min-height: 504px;
    title: @tr("Slint printer demo");
    default-font-family: DemoPalette.medium-weight;
    default-font-size: DemoPalette.base-font-size;

    property <bool> kiosk-mode: true;

    kiosk-controller := KioskController {
        kiosk-mode <=> root.kiosk-mode;
    }

    Rectangle {
        border-radius: 24px;
        clip: true;
        background: white;

        HorizontalLayout {
            side-bar := Sidebar { }

            main-view := Rectangle {
                opacity: 1;

                if PrinterState.active-page == Page.home:
                    HomePage { }

                if PrinterState.active-page == Page.ink:
                    InkPage { }

                if PrinterState.active-page == Page.settings:
                    SettingsPage { }
            }
        }
    }

    TouchArea {
        enabled: kiosk-mode;
        clicked => {
            root.kiosk-mode = false;
        }
    }
}
