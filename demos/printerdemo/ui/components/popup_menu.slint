import { DemoPalette, Label } from "../common.slint";

export component MenuPopup inherits PopupWindow {

    in-out property <[string]> items;
    in-out property <int> current_index: 0;

    callback selected(int);

    frame := Rectangle {
        background: DemoPalette.background;
        border-radius: 14px;
        border-width: 2px;
        border-color: DemoPalette.secondary;
        clip: true;

        VerticalLayout {
            for value[idx] in root.items: Rectangle {
                background: idx == root.current_index ? DemoPalette.secondary : item-area.has-hover ? DemoPalette.secondary.transparentize(0.8) : #0000;
                height: 60px;
                border-top-left-radius: idx == 0 ? frame.border-radius : 0;
                border-top-right-radius: idx == 0 ? frame.border-radius : 0;
                border-bottom-left-radius: idx == root.items.length - 1 ? frame.border-radius : 0;
                border-bottom-right-radius: idx == root.items.length - 1 ? frame.border-radius : 0;

                HorizontalLayout {
                    padding: 20px;
                    Label {
                        text: value;
                        color: idx == root.current_index ? white : item-area.has-hover ? DemoPalette.primary : DemoPalette.text-primary;
                    }
                }

                item-area := TouchArea {
                    clicked => {
                        root.selected(idx);
                    }
                }
            }
        }
    }
}