import { DemoPalette, Theme, Label } from "../common.slint";

export component ComboBox inherits VerticalLayout {
    in property <string> label <=> label-layout.text;
    in property <string> value <=> value.text;
    callback clicked <=> ta.clicked;

    label-layout := Label { }

    Rectangle {
        border-radius: 14px;
        border-width: 2px;
        border-color: DemoPalette.secondary;
        height: 60px;

        HorizontalLayout {
            alignment: space-between;
            spacing: 10px;
            padding: 20px;
            height: parent.height;

            value := Label {}

            i := Image {
                source: @image-url("../images/back.svg");
                transform-rotation: 180deg;
                colorize: DemoPalette.text-primary;
                width: 8px;
                image-fit: contain;
                y: (parent.height - self.height) / 2;
            }
        }

        ta := TouchArea { }
    }
}

export component ComboBoxChoices inherits PopupWindow {
    in property <[string]> choices;

    callback selected(int);

    Rectangle {
        background: DemoPalette.background;
        border-radius: 14px;
        border-width: 2px;
        border-color: DemoPalette.destructive;
        clip: true;

        VerticalLayout {
            for value[idx] in root.choices: Rectangle {
                background: item-area.has-hover ? DemoPalette.primary-push-button-colors.hovered : #0000;
                height: 40px;

                Label {
                    text: value;
                    color: item-area.has-hover ? DemoPalette.destructive : DemoPalette.text-primary;
                }

                item-area := TouchArea {
                    clicked => {
                        root.selected(idx);
                    }
                }
            }
        }
    }
}