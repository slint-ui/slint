import { DemoPalette, Theme, ComponentTheme } from "../common.slint";
import { PrinterState } from "../common.slint";

component SideBarIcon inherits Rectangle {
    in-out property <bool> active;
    in-out property <image> icon <=> i.source;
    in-out property <brush> icon-colorize <=> i.colorize;

    callback activate;
    width: ComponentTheme.side-bar.icon-size;
    height: self.width;
    background: active ? ComponentTheme.side-bar.active-background : Colors.transparent;
    border-radius: ComponentTheme.side-bar.icon-border-radius;

    i := Image {
        colorize: root.active ? ComponentTheme.side-bar.active-icon-color : ComponentTheme.side-bar.inactive-icon-color;
    }

    TouchArea {
        clicked => {
            root.activate();
        }
    }
}

export component Sidebar inherits Rectangle {
    background: ComponentTheme.side-bar.background;
    x: 0px;
    width: DemoPalette.side-bar-width;

    VerticalLayout {
        width: self.preferred-width;
        padding-top: 24px;
        spacing: 24px;
        alignment: start;

        SideBarIcon {
            activate => {
                PrinterState.active-page = 0;
            }
            icon: @image-url("../images/sidebar/home.svg");
            active: PrinterState.active-page == 0;
        }

        SideBarIcon {
            activate => {
                PrinterState.active-page = 1;
            }
            icon: @image-url("../images/sidebar/settings.svg");
            active: PrinterState.active-page == 1;
        }
    }

    VerticalLayout {
        width: self.preferred-width;
        padding-bottom: 24px;
        spacing: 24px;
        alignment: end;

        SideBarIcon {
            activate => {
                PrinterState.active-page = 2;
            }
            icon: @image-url("../images/sidebar/ink.svg");
            active: PrinterState.active-page == 2;
        }

        SideBarIcon {
            activate => {
                if DemoPalette.theme == Theme.Gradient {
                    DemoPalette.theme = Theme.Minimalist;
                } else if DemoPalette.theme == Theme.Minimalist {
                    DemoPalette.theme = Theme.Vibrant;
                } else if DemoPalette.theme == Theme.Vibrant {
                    DemoPalette.theme = Theme.Glass;
                } else {
                    DemoPalette.theme = Theme.Gradient;
                }
            }
            icon: @image-url("../images/sidebar/theme.svg");
            icon-colorize: white;
        }
    }

    side-separator := Rectangle {
        x: root.width - self.width;
        width: 1phx;
        background: ComponentTheme.side-bar.separator;
        height: 100%;
    }
}
