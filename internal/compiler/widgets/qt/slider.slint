// Copyright Â© SixtyFPS GmbH <info@slint.dev>
// SPDX-License-Identifier: GPL-3.0-only OR LicenseRef-Slint-Royalty-free-2.0 OR LicenseRef-Slint-Software-3.0

export component Slider inherits NativeSlider {
    value: root.minimum;
    accessible-role: slider;
    accessible-enabled: root.enabled;
    accessible-value: root.value;
    accessible-value-minimum: root.minimum;
    accessible-value-maximum: root.maximum;
    accessible-value-step: min(root.step, (root.maximum - root.minimum) / 100);
    accessible-action-set-value(v) => {
        if v.is-float() {
            root.update-value(v.to-float());
        }
    }
    accessible-action-increment => { root.increment(); }
    accessible-action-decrement => { root.decrement(); }

    function increment() {
        root.update-value(root.value + root.step);
    }

    function decrement() {
        root.update-value(root.value - root.step);
    }

    function update-value(value: float) {
        if (root.value == value) {
            return;
        }

        root.value = max(root.minimum, min(root.maximum, value));
        root.changed(root.value);
    }
}
