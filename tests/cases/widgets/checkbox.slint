// Copyright Â© SixtyFPS GmbH <info@slint.dev>
// SPDX-License-Identifier: GPL-3.0-only OR LicenseRef-Slint-Royalty-free-2.0 OR LicenseRef-Slint-Software-3.0

import { CheckBox } from "std-widgets.slint";
export component TestCase inherits Window {

    in-out property <string> toggled;
    in-out property <bool> checked <=> checkbox.checked;
    in-out property <bool> enabled <=> checkbox.enabled;

    HorizontalLayout {
        alignment: start;
        checkbox := CheckBox {
            text: "Aaa";
            toggled => {
                root.toggled += "a";
            }
        }
    }
}

/*
```rust
use slint::{SharedString, platform::PointerEventButton};

// i_slint_backend_testing::init_integration_test_with_system_time();

let instance = TestCase::new().unwrap();

assert_eq!(instance.get_checked(), false);

let mut result = slint_testing::ElementHandle::find_by_element_id(&instance, "TestCase::checkbox").collect::<Vec<_>>();
assert_eq!(result.len(), 1);
let checkbox = result.pop().unwrap();
assert_eq!(checkbox.accessible_label().unwrap(), "Aaa");
assert_eq!(checkbox.accessible_value(), None);
assert_eq!(checkbox.accessible_value_maximum(), None);
assert_eq!(checkbox.accessible_value_minimum(), None);
assert_eq!(checkbox.accessible_value_step(), None);
assert_eq!(checkbox.accessible_checked(), Some(false));
assert_eq!(checkbox.accessible_checkable(), Some(true));
assert_eq!(checkbox.accessible_enabled(), Some(true));

// accessible action can toggle
checkbox.invoke_accessible_default_action();
assert_eq!(instance.get_checked(), true, "CheckBox a was not checked");
assert_eq!(checkbox.accessible_checked(), Some(true));
assert_eq!(instance.get_toggled(), SharedString::from("a"));

// single_click can toggle
checkbox.mock_single_click(PointerEventButton::Left);
assert_eq!(instance.get_checked(), false, "CheckBox a was checked");
assert_eq!(checkbox.accessible_checked(), Some(false));
assert_eq!(instance.get_toggled(), SharedString::from("aa"));

// Cannot toggle when disabled
instance.set_enabled(false);
assert_eq!(checkbox.accessible_enabled(), Some(false));
checkbox.mock_single_click(PointerEventButton::Left);
checkbox.invoke_accessible_default_action();
assert_eq!(instance.get_toggled(), SharedString::from("aa"));
```

```cpp
auto handle = TestCase::create();
const TestCase &instance = *handle;

auto label_search = slint::testing::ElementHandle::find_by_element_id(handle, "TestCase::checkbox");
assert(label_search.size() == 1);
auto checkbox = label_search[0];
assert_eq(checkbox.accessible_label().value(), "Aaa");
assert(!checkbox.accessible_value());
assert(!checkbox.accessible_value_maximum());
assert(!checkbox.accessible_value_minimum());
assert(!checkbox.accessible_value_step());
assert_eq(checkbox.accessible_checked().value(), false);
assert_eq(checkbox.accessible_checkable().value(), true);
checkbox.invoke_accessible_default_action();
assert_eq(instance.get_checked(), true);
assert_eq(checkbox.accessible_checked().value(), true);
assert_eq(instance.get_toggled(), "a");
assert_eq(checkbox.accessible_enabled().value(), true);

instance.set_enabled(false);
assert_eq(checkbox.accessible_enabled().value(), false);
assert_eq(instance.get_toggled(), "a");
checkbox.invoke_accessible_default_action();
assert_eq(instance.get_toggled(), "a");
```

*/
