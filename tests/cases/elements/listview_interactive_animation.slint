// Copyright Â© SixtyFPS GmbH <info@slint.dev>
// SPDX-License-Identifier: GPL-3.0-only OR LicenseRef-Slint-Royalty-free-2.0 OR LicenseRef-Slint-Software-3.0

// Testing if the animation is applied to the flickable after mouse release

import { ListView } from "std-widgets.slint";
export component TestCase inherits Window {
    preferred-width: 300px;
    preferred-height: 300px;

    in-out property <string> result;
    in-out property <length> viewport-y <=> lv.viewport-y;

    lv := ListView {
        mouse-drag-pan-enabled: true;
        for _[num] in 2130000000: Rectangle {
            height: 20px;
            border-width: 1px;
            border-color: red;
            Text { text: num; }
        }
    }
}


/*

```rust
let instance = TestCase::new().unwrap();

// Scroll down
slint_testing::send_mouse_click_and_release(&instance, 5., 130., 5., 5.); // Scrolling up. Larger y is display bottom (Diff: 130 - 5 = 125)
// let the animation run for a bit
slint_testing::mock_elapsed_time(100);
// Due to the animation the value must be more than the diff of scrolling
assert!(instance.get_viewport_y() < -125., "Received: {}, Desired: smaller than {}", instance.get_viewport_y(), -125);

// Now scrolling up again
let old_viewport_y = instance.get_viewport_y();
println!("Old viewport y: {:?}", old_viewport_y);
slint_testing::send_mouse_click_and_release(&instance, 5., 0., 5., 75.); // Larger y is display bottom (Diff: 75 - 0)
// let the animation run for a bit
slint_testing::mock_elapsed_time(100);
assert!((instance.get_viewport_y() - old_viewport_y) > 75., "Received: {}, Desired: larger than {}", instance.get_viewport_y() - old_viewport_y, 75);
```

*/
